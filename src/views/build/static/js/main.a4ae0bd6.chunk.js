(this.webpackJsonpviews=this.webpackJsonpviews||[]).push([[0],{43:function(e,t,c){},44:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),j=c(18),i=c.n(j),o=c(2),s=c(5),a=c(0),d=function(e){var t=e.children,c=Object(o.f)();return Object(a.jsx)(s.a,{domain:"dpmsandbox.us.auth0.com",clientId:"DGbyl4y3oQLTIv7xFCWTuLY657Z13m1x",redirectUri:window.location.origin,onRedirectCallback:function(e){c.push((null===e||void 0===e?void 0:e.returnTo)||window.location.pathname)},audience:"https://sandbox.api/",children:t})},b=c(21),l=c(22),h=function(e){var t=e.component,c=Object(l.a)(e,["component"]);return Object(a.jsx)(o.a,Object(b.a)({component:Object(s.c)(t,{onRedirecting:function(){return Object(a.jsx)("div",{children:"loading..."})}})},c))},u=function(){var e=Object(s.b)().loginWithRedirect;return Object(a.jsx)("button",{onClick:function(){return e()},children:"Log In"})},O=function(){var e=Object(s.b)().logout;return Object(a.jsx)("button",{onClick:function(){return e({returnTo:window.location.origin})},children:"Log Out"})},x=function(){return Object(s.b)().isAuthenticated?Object(a.jsx)(O,{}):Object(a.jsx)(u,{})},p=function(e){var t=e.children;return Object(a.jsxs)("header",{children:[Object(a.jsx)("h1",{children:"portfolio application"}),Object(a.jsx)("p",{children:Object(a.jsx)(x,{})}),t]})},f=c(3),m=function(){return Object(a.jsx)("nav",{children:Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)(f.b,{to:"/",children:"home"})}),Object(a.jsx)("li",{children:Object(a.jsx)(f.b,{to:"/projects",children:"projects"})})]})})},v=function(e){var t=e.children;return Object(a.jsx)("main",{children:t})},g=function(){return Object(a.jsx)("footer",{children:"footer"})},w=function(e){var t=e.children;return Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsx)(p,{children:Object(a.jsx)(m,{})}),Object(a.jsx)(v,{children:t}),Object(a.jsx)(g,{children:Object(a.jsx)("p",{children:"footer"})})]})},k=function(){var e=Object(o.h)().url;return Object(a.jsxs)("h3",{children:[e," page not found"]})},L=function(){var e=Object(o.h)(),t=e.url,c=e.path;return Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsx)("h2",{children:"projects page"}),Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)(f.b,{to:"".concat(t,"/add"),children:"add a project"})}),Object(a.jsx)("li",{children:Object(a.jsx)(f.b,{to:"".concat(t,"/list"),children:"projects list"})})]}),Object(a.jsxs)(o.c,{children:[Object(a.jsx)(o.a,{path:"".concat(c,"/add"),component:_}),Object(a.jsx)(o.a,{path:"".concat(c,"/list"),component:S}),Object(a.jsx)(o.a,{path:"".concat(c,"/:id/detail"),component:F}),Object(a.jsx)(o.a,{path:"".concat(c,"/:id/update"),component:R}),Object(a.jsx)(o.a,{path:"".concat(c,"/*"),component:k})]})]})},_=function(){return Object(a.jsx)("h3",{children:"add project"})},y=c(17),C=c.n(y),T=c(20),E=c(12),I=function(e){var t=Object(n.useState)(null),c=Object(E.a)(t,2),r=c[0],j=c[1],i=Object(n.useState)(null),o=Object(E.a)(i,2),a=o[0],d=o[1],b=Object(n.useState)(!0),l=Object(E.a)(b,2),h=l[0],u=l[1],O=Object(s.b)().getAccessTokenSilently,x="https://dpm-sandbox-api.herokuapp.com";x+=e;var p=function(){var e=Object(T.a)(C.a.mark((function e(){var t,c,n,r,i,o;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O();case 3:return t=e.sent,e.next=6,fetch(x,{headers:{Authorization:"Bearer ".concat(t)}});case 6:return c=e.sent,e.next=9,c.json();case 9:if(n=e.sent,console.log(n),r=n.success,i=n.message,o=n.results,r){e.next=16;break}throw Error(i);case 16:if(c.ok){e.next=18;break}throw Error("Could not fetch data for this resource.");case 18:j(o),u(!1),d(null),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(0),d(e.t0.message),u(!1);case 27:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){p()}),[e]),{data:r,isLoading:h,error:a}},S=function(){var e=I("/api/projects"),t=e.data,c=e.isLoading,n=e.error;return Object(a.jsxs)("section",{children:[Object(a.jsx)("h3",{children:"projects list"}),n&&Object(a.jsx)("p",{children:n}),c&&Object(a.jsx)("p",{children:"Loading..."}),t&&Object(a.jsx)("ul",{children:t.map((function(e){return Object(a.jsx)(A,{item:e},e._id)}))})]})},A=function(e){var t=e.item;return Object(a.jsx)("article",{children:Object(a.jsx)("p",{children:Object(a.jsxs)("li",{children:[t.title," by ",t.author,"\xa0",Object(a.jsx)("br",{}),Object(a.jsxs)("small",{children:[Object(a.jsx)(f.b,{to:{pathname:"/projects/".concat(t._id,"/detail"),state:{item:t}},children:"detail"}),"\xa0 | \xa0",Object(a.jsx)(f.b,{to:{pathname:"/projects/".concat(t._id,"/update"),state:{item:t}},children:"update"})]})]})})})},F=function(){var e=Object(o.g)().state.item;return Object(a.jsxs)("article",{children:[Object(a.jsx)("h3",{children:"project detail"}),Object(a.jsxs)("h4",{children:[e.title,Object(a.jsx)("br",{}),Object(a.jsxs)("small",{children:["by ",e.author]})]}),Object(a.jsx)("p",{children:Object(a.jsx)(f.b,{to:{pathname:"/projects/".concat(e._id,"/update"),state:{item:e}},children:"update project"},"update_".concat(e._id))})]})},R=function(){var e=Object(o.g)().state.item;return Object(a.jsxs)("article",{children:[Object(a.jsx)("h3",{children:"update project"}),Object(a.jsxs)("h4",{children:[e.title,Object(a.jsx)("br",{}),Object(a.jsxs)("small",{children:["by ",e.author]})]}),Object(a.jsx)("p",{children:Object(a.jsx)(f.b,{to:{pathname:"/projects/".concat(e._id,"/detail"),state:{item:e}},children:"project detail"},"update_".concat(e._id))})]})},B=function(){return Object(a.jsx)("h2",{children:"home page"})};var J=function(){return Object(s.b)().isLoading?Object(a.jsx)("div",{children:"Loading..."}):Object(a.jsx)(w,{children:Object(a.jsxs)(o.c,{children:[Object(a.jsx)(o.a,{path:"/",exact:!0,component:B}),Object(a.jsx)(h,{path:"/projects",component:L}),Object(a.jsx)(o.a,{path:"*",component:k})]})})};c(43);i.a.render(Object(a.jsx)(f.a,{children:Object(a.jsx)(d,{children:Object(a.jsx)(J,{})})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.a4ae0bd6.chunk.js.map